# Git操作方法
Git,Githubに関する決まり事に関するドキュメントです。

## 自然言語
日本語を使用します。例外としてコミットメッセージのprefixとブランチ名は英語を使用します。

## 開発の流れ
下記の流れに沿って開発します。
1. Issue作成
   - これから取り掛かる作業をIssueに書きます。自分やチームの進捗確認に便利です。
   - Isuerページの「New Issue」ボタンをタップ
   - 3つのテンプレートから適切なものを選択（なければOpen a blank issue）
   - テンプレートに沿って書くだけ
2. ブランチを切って開発
   - developブランチでプルした後に作成したissueについて作業するためのブランチを切って開発します
   - コミットは細かければ細かいほどいいくらいの認識でOKです
   - ブランチの細かい規則は[こちら](#ブランチ)を見ましょう
3. プッシュする
   - プッシュ前にdevelopブランチに戻ってプルします
   - 開発中のブランチに行きdevelopブランチを開発中のブランチにマージします
     - この時コンフリクトが起きた場合は頑張って解消します
   - プッシュします
4. プルリクを出す
   - 作業した内容についてPull requestを書きます
   - Githubに行ったら「Pull requestしますか（適当）」な黄色のポップアップがあるのでそれをクリックしてPull requestを作成します
     - なければPull requestページから作成します。ググりましょう。
   - 右のメニューのReviewersからレビューして欲しい人を選択します
   - 承認されるのを待ちます

### ここからはレビュアーが行うことです

5. レビューする
   - レビュー依頼が来たら場合によって自分の環境で実行する必要があります。初めにdevelopに戻りプルします。
     - 作業中の内容がありチェックアウトできない場合は、作業中の内容をstash（一時退避）することができます。[コマンド](https://qiita.com/chihiro/items/f373873d5c2dfbd03250)や[VSCode](https://qiita.com/y-tsutsu/items/2ba96b16b220fb5913be#%E3%82%B9%E3%82%BF%E3%83%83%E3%82%B7%E3%83%A5%E3%81%99%E3%82%8B)の記事を記事を参考にどうぞ。
   - プルできると「origin/feature/~~~」のように先頭にoriginがついた状態でレビューして欲しいブランチがあるのでチェックアウトして動作確認します
   - Pull requestタイトルの下のメニューの「Files changed」、もしくは緑色でポップアップされた「Add your review（適当）」ボタンを押してレビューします
   - レビューが終わったら「Review changes」ボタンを押して、コメント記述後、「Approve」にチェックを入れて「Submit review」を押します。
   - Approveを選択することでPull requestタイトルの下のメニューの「Conversation」の下の方の「Merge pull request」ボタン、その後「Confirm merge」が押せるようになります

### 以上で開発した機能が最新のブランチに反映されました！！

## ブランチ
ブランチは以下のように運用します。
- main: プロダクトリリース用のブランチ。
- develop: 開発用ブランチ。基本的のdevelopブランチからブランチへ分岐して開発し、developブランチにマージする。リリース準備が出来次第mainへマージする。
- feature: 機能を追加用ブランチ。developブランチから分岐される。
- hotfix: バグ修正用ブランチ。developブランチから分岐される。

**note**: 基本的に main ブランチと develop ブランチでは一切の操作を行いません。何らかの変更を行う場合は必ずイシューを作成し、ブランチを生してください。main と develop は保護設定してるのプッシュはできません。

### feature ブランチと hotfix ブランチについて

feature ブランチと hotfix ブランチは以下のフォーマットで命名を行います。

- feature/{Issueの番号}_xxx
- hotfix/{Issueの番号}_yyy

例）

- feature/1_set_up_dev_environment
- feature/47_create_model
- hotfix/139_fix_layout

## コミットメッセージ
[Gitのコミットメッセージの書き方](https://qiita.com/itosho/items/9565c6ad2ffc24c09364)を参考にします。

### 原則
以下のフォーマットとします。

- 1行目：prefix 要約
- 2行目：空行
- 3行目：変更した理由（ほとんどの場合省略可）

### １行目
prefix（コミット種別）と要約を書きます。
#### **prefix**
prefixは以下の4通りとします。

- fix：バグ・誤字修正
- add：機能・ドキュメント追加
- update：機能・ドキュメント修正（バグ以外）
- remove：削除

#### **要約**
変更内容の概要を書きます。シンプルにお願いします。（３行目で具体的に書けるので。）


### 3行目
変更した理由を具体的に書きます。要約のみで十分に説明できる場合、省略して問題ありません。

例）2行目は全て空行  
- 1行目：add XXXXXのコンポーネント作成  

<br>

- １行目：fix 削除フラグが更新されない不具合の修正
- ３行目：更新SQLの対象カラムに削除フラグが含まれていなかったため追加しました。

### コミットの粒度について

コミットは細ければ細かいほど良いという認識で問題ありません。 \
ここまで書いたコード・ここまで作った機能を失いたくないと思ったらコミットしましょう。

## マージ可能条件

少なくとも1人からの Approve を必要とする。